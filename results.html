<!DOCTYPE html>
<html>
<head>
    <title>Dziennik Postępów - Wyniki</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <h1>Twoje wyniki</h1>
        
        <nav class="nav-bar">
            <a href="index.html" class="nav-link">Wpisz dane</a>
            <a href="results.html" class="nav-link active">Wyniki</a>
            <a href="plan.html" class="nav-link">Plan</a>
        </nav>
        
        <h2>Podsumowanie</h2>
        <div class="card-container" id="comparison-card"></div>
        
        <h2>Wszystkie wpisy</h2>
        <ul class="entry-list" id="wpisyList"></ul>
    </div>

    <script>
        const STORAGE_KEY = 'progressEntries';

        function loadEntries() {
            const storedEntries = localStorage.getItem(STORAGE_KEY);
            return storedEntries ? JSON.parse(storedEntries) : [];
        }

        function saveEntries(entries) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(entries));
        }

        function usunWpis(index) {
            const entries = loadEntries();
            entries.splice(index, 1);
            saveEntries(entries);
            wyświetlWpisy();
            wyświetlPodsumowanie();
        }

        function wyświetlWpisy() {
            const entries = loadEntries();
            const lista = document.getElementById('wpisyList');
            lista.innerHTML = '';
            
            entries.forEach((wpis, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span>Data: ${wpis.data}</span>
                    <span>Waga: ${wpis.waga} kg</span>
                    <span>Wzrost: ${wpis.wzrost} cm</span>
                    <span>Klata: ${wpis.klata} kg</span>
                    <span>Biceps: ${wpis.bicepsObw} cm</span>
                    <button class="delete-btn" onclick="usunWpis(${index})">Usuń</button>
                `;
                lista.appendChild(li);
            });
        }

        function wyświetlPodsumowanie() {
            const entries = loadEntries();
            const comparisonDiv = document.getElementById('comparison-card');
            comparisonDiv.innerHTML = '';

            if (entries.length > 1) {
                const sortedEntries = [...entries].sort((a, b) => new Date(a.data) - new Date(b.data));
                const pierwszyWpis = sortedEntries[0];
                const ostatniWpis = sortedEntries[sortedEntries.length - 1];
                
                comparisonDiv.innerHTML = `
                    <div class="card comparison-card">
                        <h3>Porównanie postępów</h3>
                        <p><strong>Początek (${pierwszyWpis.data}):</strong></p>
                        <p>Waga: ${pierwszyWpis.waga} kg</p>
                        <p>Wyciskanie na klatę: ${pierwszyWpis.klata} kg</p>
                        <p>Obwód bicepsa: ${pierwszyWpis.bicepsObw} cm</p>
                        <hr>
                        <p><strong>Koniec (${ostatniWpis.data}):</strong></p>
                        <p>Waga: ${ostatniWpis.waga} kg</p>
                        <p>Wyciskanie na klatę: ${ostatniWpis.klata} kg</p>
                        <p>Obwód bicepsa: ${ostatniWpis.bicepsObw} cm</p>
                        <hr>
                        <p><strong>Zmiana:</strong></p>
                        <p>Waga: ${(ostatniWpis.waga - pierwszyWpis.waga).toFixed(2)} kg</p>
                        <p>Klata: ${(ostatniWpis.klata - pierwszyWpis.klata).toFixed(2)} kg</p>
                        <p>Biceps: ${(ostatniWpis.bicepsObw - pierwszyWpis.bicepsObw).toFixed(2)} cm</p>
                    </div>
                `;
            }
        }

        window.onload = () => {
            wyświetlWpisy();
            wyświetlPodsumowanie();
        };

    </script>

</body>
</html>